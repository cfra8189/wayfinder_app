<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | WayfinderOS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'JetBrains Mono', monospace; }
        body { background: #0a0a0a; }
        .accent { color: #c3f53c; }
        .btn-primary { background: #22c55e; }
        .btn-primary:hover { background: #16a34a; }
        .input-field { background: #111; border: 1px solid #333; }
        .input-field:focus { border-color: #c3f53c; outline: none; }
        .card { background: #111; border: 1px solid #222; }
        .card:hover { border-color: #333; }
        .status-concept { background: #374151; }
        .status-development { background: #1d4ed8; }
        .status-review { background: #d97706; }
        .status-published { background: #16a34a; }
        
        .tour-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 100; }
        .tour-highlight { position: relative; z-index: 101; box-shadow: 0 0 0 4px #c3f53c, 0 0 20px rgba(195, 245, 60, 0.5); border-radius: 8px; }
        .tour-tooltip { position: fixed; z-index: 102; background: #1a1a1a; border: 2px solid #c3f53c; border-radius: 12px; padding: 20px; max-width: 320px; }
        .tour-tooltip h4 { color: #c3f53c; font-weight: bold; margin-bottom: 8px; }
        .tour-tooltip p { color: #ccc; font-size: 14px; line-height: 1.5; }
        .tour-tooltip .tour-buttons { margin-top: 16px; display: flex; gap: 8px; justify-content: flex-end; }
        .tour-tooltip .tour-btn { padding: 8px 16px; border-radius: 6px; font-size: 12px; cursor: pointer; }
        .tour-tooltip .tour-skip { background: #333; color: #999; border: none; }
        .tour-tooltip .tour-next { background: #c3f53c; color: #000; border: none; font-weight: bold; }
        .tour-step-indicator { display: flex; gap: 6px; margin-top: 12px; }
        .tour-step-dot { width: 8px; height: 8px; border-radius: 50%; background: #333; }
        .tour-step-dot.active { background: #c3f53c; }
    </style>
</head>
<body class="text-white min-h-screen">
    <div id="auth-screen" class="min-h-screen flex items-center justify-center p-6">
        <div class="card p-8 rounded-xl max-w-md w-full">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-[#c3f53c] rounded-lg flex items-center justify-center text-black font-bold">W</div>
                <div>
                    <h1 class="text-xl accent font-bold">WAYFINDER OS</h1>
                    <p class="text-gray-500 text-xs">Project Tracker</p>
                </div>
            </div>
            
            <div id="login-form-container">
                <h2 class="text-lg mb-4">Sign In</h2>
                <form id="login-form" class="space-y-4">
                    <input type="email" id="login-email" placeholder="Email" class="input-field w-full p-3 rounded" required>
                    <input type="password" id="login-password" placeholder="Password" class="input-field w-full p-3 rounded" required>
                    <button type="submit" class="btn-primary w-full py-3 rounded text-black font-bold">SIGN IN</button>
                </form>
                <p class="text-center text-gray-500 text-sm mt-4">
                    New here? <button onclick="showRegister()" class="accent hover:underline">Create Account</button>
                </p>
            </div>
            
            <div id="register-form-container" class="hidden">
                <h2 class="text-lg mb-4">Create Account</h2>
                <form id="register-form" class="space-y-4">
                    <input type="text" id="reg-name" placeholder="Full Name" class="input-field w-full p-3 rounded" required>
                    <input type="email" id="reg-email" placeholder="Email" class="input-field w-full p-3 rounded" required>
                    <input type="password" id="reg-password" placeholder="Password" class="input-field w-full p-3 rounded" required>
                    <select id="reg-role" class="input-field w-full p-3 rounded">
                        <option value="creator">Individual Creator</option>
                        <option value="studio">Studio / Business</option>
                    </select>
                    <input type="text" id="reg-business" placeholder="Business Name (optional)" class="input-field w-full p-3 rounded">
                    <button type="submit" class="btn-primary w-full py-3 rounded text-black font-bold">CREATE ACCOUNT</button>
                </form>
                <p class="text-center text-gray-500 text-sm mt-4">
                    Have an account? <button onclick="showLogin()" class="accent hover:underline">Sign In</button>
                </p>
            </div>
            
            <p id="auth-error" class="text-red-400 text-sm mt-4 hidden text-center"></p>
        </div>
    </div>

    <div id="dashboard" class="hidden">
        <header class="border-b border-gray-800 p-4">
            <div class="max-w-6xl mx-auto flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-[#c3f53c] rounded flex items-center justify-center text-black font-bold text-sm">W</div>
                    <span class="accent font-bold">WAYFINDER OS</span>
                </div>
                <div id="nav-links" class="flex items-center gap-4">
                    <span id="user-name" class="text-gray-400 text-sm"></span>
                    <a href="/creative.html" class="text-gray-500 hover:text-white text-sm">Creative Space</a>
                    <a href="/" class="text-gray-500 hover:text-white text-sm">Terminal</a>
                    <a href="/generator.html" id="nav-agreements" class="text-gray-500 hover:text-white text-sm">Agreements</a>
                    <button onclick="startTour()" class="text-gray-500 hover:text-[#c3f53c] text-sm">Help</button>
                    <button onclick="logout()" class="text-gray-500 hover:text-red-400 text-sm">Logout</button>
                </div>
            </div>
        </header>

        <main class="max-w-6xl mx-auto p-6">
            <div class="flex items-center justify-between mb-8">
                <div>
                    <h1 class="text-2xl font-bold">Project Tracker</h1>
                    <p class="text-gray-500 text-sm">Track your work from concept to published</p>
                </div>
                <button id="new-project-btn" onclick="openNewProject()" class="btn-primary px-4 py-2 rounded text-black font-bold text-sm">
                    + NEW PROJECT
                </button>
            </div>

            <div id="stats-panel" class="grid grid-cols-4 gap-4 mb-8">
                <div class="card p-4 rounded-lg">
                    <p class="text-gray-500 text-xs mb-1">TOTAL</p>
                    <p id="stat-total" class="text-2xl font-bold">0</p>
                </div>
                <div class="card p-4 rounded-lg">
                    <p class="text-gray-500 text-xs mb-1">CONCEPT</p>
                    <p id="stat-concept" class="text-2xl font-bold text-gray-400">0</p>
                </div>
                <div class="card p-4 rounded-lg">
                    <p class="text-gray-500 text-xs mb-1">IN PROGRESS</p>
                    <p id="stat-development" class="text-2xl font-bold text-blue-400">0</p>
                </div>
                <div class="card p-4 rounded-lg">
                    <p class="text-gray-500 text-xs mb-1">PUBLISHED</p>
                    <p id="stat-published" class="text-2xl font-bold text-green-400">0</p>
                </div>
            </div>

            <div id="filter-buttons" class="mb-4 flex gap-2">
                <button onclick="filterProjects('all')" class="filter-btn px-3 py-1 rounded text-sm bg-gray-800" data-filter="all">All</button>
                <button onclick="filterProjects('concept')" class="filter-btn px-3 py-1 rounded text-sm bg-gray-900" data-filter="concept">Concept</button>
                <button onclick="filterProjects('development')" class="filter-btn px-3 py-1 rounded text-sm bg-gray-900" data-filter="development">Development</button>
                <button onclick="filterProjects('review')" class="filter-btn px-3 py-1 rounded text-sm bg-gray-900" data-filter="review">Review</button>
                <button onclick="filterProjects('published')" class="filter-btn px-3 py-1 rounded text-sm bg-gray-900" data-filter="published">Published</button>
            </div>

            <div id="projects-list" class="space-y-3">
                <p class="text-gray-500 text-center py-8">No projects yet. Create your first project!</p>
            </div>
        </main>
    </div>

    <div id="project-modal" class="hidden fixed inset-0 bg-black/80 flex items-center justify-center p-6 z-50">
        <div class="card p-6 rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modal-title" class="text-lg font-bold">New Project</h3>
                <button onclick="closeModal()" class="text-gray-500 hover:text-white">&times;</button>
            </div>
            <form id="project-form" class="space-y-4">
                <input type="hidden" id="project-id">
                <div>
                    <label class="block text-sm accent mb-1">Title *</label>
                    <input type="text" id="project-title" class="input-field w-full p-3 rounded" required>
                </div>
                <div>
                    <label class="block text-sm accent mb-1">Type</label>
                    <select id="project-type" class="input-field w-full p-3 rounded">
                        <option value="single">Single</option>
                        <option value="ep">EP</option>
                        <option value="album">Album</option>
                        <option value="beat">Beat/Instrumental</option>
                        <option value="visual">Visual/Video</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm accent mb-1">Status</label>
                    <select id="project-status" class="input-field w-full p-3 rounded">
                        <option value="concept">Concept</option>
                        <option value="development">Development</option>
                        <option value="review">Review</option>
                        <option value="published">Published</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm accent mb-1">Description</label>
                    <textarea id="project-description" class="input-field w-full p-3 rounded" rows="3"></textarea>
                </div>
                <div id="metadata-section" class="space-y-3 border-t border-gray-700 pt-4">
                    <div class="flex items-center justify-between">
                        <p class="text-sm accent">Metadata</p>
                        <button type="button" onclick="showIPGuide()" class="text-xs text-gray-500 hover:text-[#c3f53c]">What are these?</button>
                    </div>
                    <div class="relative">
                        <input type="text" id="meta-isrc" placeholder="ISRC Code" class="input-field w-full p-2 rounded text-sm">
                        <span class="absolute right-2 top-2 text-gray-600 text-xs cursor-help" title="12-character code for your recording. Get free from your distributor (DistroKid, CD Baby, etc.)">?</span>
                    </div>
                    <div class="relative">
                        <input type="text" id="meta-upc" placeholder="UPC Code" class="input-field w-full p-2 rounded text-sm">
                        <span class="absolute right-2 top-2 text-gray-600 text-xs cursor-help" title="12-digit code for your release. Usually provided free by your distributor.">?</span>
                    </div>
                    <div class="relative">
                        <input type="text" id="meta-copyright" placeholder="Copyright Registration #" class="input-field w-full p-2 rounded text-sm">
                        <span class="absolute right-2 top-2 text-gray-600 text-xs cursor-help" title="Register at Copyright.gov ($45-65). Required to sue for infringement.">?</span>
                    </div>
                    <input type="text" id="meta-release-date" placeholder="Release Date (YYYY-MM-DD)" class="input-field w-full p-2 rounded text-sm">
                </div>
                <div id="media-section" class="space-y-3 border-t border-gray-700 pt-4">
                    <p class="text-sm accent">Media Links</p>
                    <input type="url" id="media-audio" placeholder="Audio URL (SoundCloud, Spotify, etc.)" class="input-field w-full p-2 rounded text-sm">
                    <input type="url" id="media-video" placeholder="Video URL (YouTube, Vimeo, etc.)" class="input-field w-full p-2 rounded text-sm">
                    <input type="url" id="media-artwork" placeholder="Artwork URL (image link)" class="input-field w-full p-2 rounded text-sm">
                    <input type="url" id="media-files" placeholder="Files URL (Dropbox, Google Drive, etc.)" class="input-field w-full p-2 rounded text-sm">
                </div>
                <div class="flex gap-3">
                    <button type="submit" class="btn-primary flex-1 py-3 rounded text-black font-bold">SAVE PROJECT</button>
                    <button type="button" onclick="closeModal()" class="bg-gray-700 px-6 py-3 rounded">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <div id="ip-guide-modal" class="hidden fixed inset-0 bg-black/90 flex items-center justify-center p-6 z-50 overflow-y-auto">
        <div class="card p-6 rounded-xl max-w-2xl w-full my-8">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold accent">Protecting Your Work</h3>
                <button onclick="closeIPGuide()" class="text-gray-500 hover:text-white text-xl">&times;</button>
            </div>
            <div class="space-y-6 text-sm text-gray-300 max-h-[70vh] overflow-y-auto pr-2">
                <div class="bg-yellow-900/30 border border-yellow-700 p-4 rounded-lg">
                    <p class="text-yellow-400 font-bold mb-2">Important Disclaimer</p>
                    <p>Identifiers (ISRC, UPC) help track and pay you, but they are NOT legal protection. You must formally register your copyright to sue for infringement.</p>
                </div>

                <div>
                    <h4 class="font-bold text-white mb-2">Primary Identifiers for Recordings</h4>
                    <p class="mb-2"><span class="accent">ISRC</span> (International Standard Recording Code): A unique 12-character "digital fingerprint" for your sound recording. Mandatory for streaming. Each version (remix, live, edit) needs its own ISRC.</p>
                    <p><span class="accent">UPC</span> (Universal Product Code): A 12-digit code identifying your release as a product (album, EP, single). Tracks sales and distribution.</p>
                </div>

                <div>
                    <h4 class="font-bold text-white mb-2">For Compositions & Rightsholders</h4>
                    <p class="mb-2"><span class="accent">ISWC</span>: Identifies your musical composition (lyrics + melody), distinct from recordings.</p>
                    <p class="mb-2"><span class="accent">IPI</span>: Your unique number as a songwriter/composer. Get this by joining a PRO (ASCAP, BMI).</p>
                </div>

                <div>
                    <h4 class="font-bold text-white mb-2">How to Get These (Low Cost)</h4>
                    <table class="w-full text-xs">
                        <tr class="border-b border-gray-700"><td class="py-2 accent">ISRC</td><td>FREE from distributors (DistroKid, CD Baby, TuneCore)</td></tr>
                        <tr class="border-b border-gray-700"><td class="py-2 accent">UPC</td><td>FREE to $30 - Usually included by distributor</td></tr>
                        <tr class="border-b border-gray-700"><td class="py-2 accent">IPI</td><td>FREE - Join BMI (free) or ASCAP</td></tr>
                        <tr class="border-b border-gray-700"><td class="py-2 accent">ISWC</td><td>FREE - Auto-generated when you register song with PRO</td></tr>
                        <tr><td class="py-2 accent">Copyright</td><td>$45-65 at Copyright.gov</td></tr>
                    </table>
                </div>

                <div>
                    <h4 class="font-bold text-white mb-2">Recommended Workflow</h4>
                    <ol class="list-decimal list-inside space-y-1">
                        <li><span class="text-gray-400">Create:</span> Finish your song</li>
                        <li><span class="text-yellow-400">Copyright:</span> Register at Copyright.gov for legal protection</li>
                        <li><span class="text-gray-400">Affiliate:</span> Join a PRO (BMI/ASCAP) to get your IPI</li>
                        <li><span class="text-gray-400">Register:</span> Register composition with PRO for ISWC</li>
                        <li><span class="text-gray-400">Distribute:</span> Upload to distributor for ISRC and UPC</li>
                    </ol>
                </div>

                <div class="bg-red-900/30 border border-red-700 p-4 rounded-lg">
                    <p class="text-red-400 font-bold mb-2">Why Copyright Matters</p>
                    <p class="mb-2">Identifiers are for tracking and payment. Copyright is your legal shield.</p>
                    <ul class="list-disc list-inside text-xs space-y-1">
                        <li>Without registration, you cannot sue in federal court</li>
                        <li>You may miss statutory damages (up to $150,000 per infringement)</li>
                        <li>Mailing a CD to yourself ("poor man's copyright") is legally ineffective</li>
                    </ul>
                </div>

                <div class="text-center pt-4">
                    <button onclick="closeIPGuide()" class="btn-primary px-8 py-3 rounded text-black font-bold">Got It</button>
                </div>
            </div>
        </div>
    </div>

    <div id="publish-checkpoint-modal" class="hidden fixed inset-0 bg-black/90 flex items-center justify-center p-6 z-50">
        <div class="card p-6 rounded-xl max-w-md w-full">
            <h3 class="text-lg font-bold accent mb-4">Before You Publish</h3>
            <div class="space-y-4 text-sm">
                <p class="text-gray-300">Moving to "Published" means your work is released. Have you protected your intellectual property?</p>
                
                <div class="space-y-2">
                    <label class="flex items-start gap-3 cursor-pointer">
                        <input type="checkbox" id="check-copyright" class="mt-1 w-4 h-4">
                        <span class="text-gray-400">I have registered my copyright at <span class="accent">Copyright.gov</span></span>
                    </label>
                    <label class="flex items-start gap-3 cursor-pointer">
                        <input type="checkbox" id="check-pro" class="mt-1 w-4 h-4">
                        <span class="text-gray-400">I have joined a PRO (ASCAP, BMI) and registered this composition</span>
                    </label>
                    <label class="flex items-start gap-3 cursor-pointer">
                        <input type="checkbox" id="check-distributor" class="mt-1 w-4 h-4">
                        <span class="text-gray-400">I have my ISRC and UPC from my distributor</span>
                    </label>
                </div>

                <p class="text-xs text-gray-500">You can proceed without checking these, but we strongly recommend protecting your work first.</p>

                <div class="flex gap-3 pt-2">
                    <button onclick="confirmPublish()" class="btn-primary flex-1 py-3 rounded text-black font-bold">Continue to Publish</button>
                    <button onclick="closePublishCheckpoint()" class="bg-gray-700 px-4 py-3 rounded">Cancel</button>
                </div>

                <button onclick="showIPGuide(); closePublishCheckpoint();" class="w-full text-center text-xs text-gray-500 hover:text-[#c3f53c]">Learn more about protecting your work</button>
            </div>
        </div>
    </div>

    <script src="dashboard.js"></script>
</body>
</html>
